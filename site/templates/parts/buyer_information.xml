<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document SYSTEM "../../../units/schema/template.dtd">
<document>
	<div id="checkout_container">
		<div id="checkout_steps" class="input_details">
			<cms:guest>
				<a href="javascript:void(0);">
					<cms:text constant="title_sign_in" module="shop"/>
				</a>
			</cms:guest>
			<cms:if condition="$params['include_shipping']">
				<a href="javascript:void(0);">
					<cms:text constant="title_shipping_information" module="shop"/>
				</a>
			</cms:if>
			<a href="javascript:void(0);">
				<cms:text constant="title_card_selection"/>
			</a>
			<a href="javascript:void(0);">
				<cms:text constant="title_checkout" module="shop"/>
			</a>
		</div>

		<div id="input_details" cms:skip_cache="1">
			<form method="POST" action="">
				<div class="pages">
					<!-- Sign In -->
					<cms:guest>
						<div class="page" id="sign_in">
							<h1><cms:text constant="title_sign_in" module="shop"/></h1>

							<label class="radio">
								<input
									type="radio"
									name="existing_user"
									value="log_in"
									checked="checked"
									/>
								<span><cms:text constant="label_existing_user" module="shop"/></span>
							</label>

							<div class="existing_account visible">
								<label>
									<span><cms:text constant="label_email" module="shop"/></span>
									<input
										type="email"
										name="sign_in_email"
										maxlength="127"
										autocomplete="on"
										/>
								</label>
								<label>
									<span><cms:text constant="label_password" module="shop"/></span>
									<input
										type="password"
										name="sign_in_password"
										maxlength="127"
										autocomplete="off"
										/>
								</label>
								<label
									class="$params['show_captcha'] ? 'captcha' : 'captcha hidden'"
									cms:eval="class"
									>
									<span><cms:text constant="label_captcha" module="shop"/></span>
									<input
										type="text"
										name="captcha"
										maxlength="4"
										autocomplete="off"
										/>
									<cms:module
										name="captcha"
										action="print_image_tag"
										/>
								</label>
								<a href="javascript:void();" class="password_recovery">
									<cms:text constant="label_password_recovery" module="shop"/>
								</a>
							</div>

							<hr/>

							<label class="radio">
								<input
									type="radio"
									name="existing_user"
									value="sign_up"
									/>
								<span><cms:text constant="label_new_user" module="shop"/></span>
							</label>

							<div class="new_account">
								<label>
									<span><cms:text constant="label_first_name" module="shop"/></span>
									<input
										class="in_array('first_name', $params['bad_fields']) ? 'bad' : ''"
										cms:eval="class,value"
										type="text"
										name="first_name"
										value="isset($_POST['first_name']) ? fix_chars($_POST['first_name']) : ''"
										maxlength="64"
										data-required="1"
										autocomplete="on"
										/>
								</label>
								<label class="separator">
									<span><cms:text constant="label_last_name" module="shop"/></span>
									<input
										class="in_array('last_name', $params['bad_fields']) ? 'bad' : ''"
										cms:eval="class,value"
										type="text"
										name="last_name"
										value="isset($_POST['last_name']) ? fix_chars($_POST['last_name']) : ''"
										maxlength="64"
										data-required="1"
										autocomplete="on"
										/>
								</label>
								<label>
									<span><cms:text constant="label_email" module="shop"/></span>
									<input
										class="in_array('new_email', $params['bad_fields']) ? 'bad' : ''"
										cms:eval="class,value"
										type="email"
										name="new_email"
										value="isset($_POST['new_email']) ? fix_chars($_POST['new_email']) : ''"
										maxlength="127"
										data-required="1"
										autocomplete="on"
										/>
								</label>
								<label>
									<span><cms:text constant="label_password" module="shop"/></span>
									<input
										type="password"
										name="new_password"
										maxlength="127"
										data-required="1"
										autocomplete="off"
										/>
								</label>
								<label>
									<span><cms:text constant="label_confirm" module="shop"/></span>
									<input
										type="password"
										name="new_password_confirm"
										maxlength="127"
										data-required="1"
										autocomplete="off"
										/>
								</label>
								<cms:if condition="!is_null($params['terms_link'])">
									<label class="checkbox">
										<input
											type="checkbox"
											name="agree_to_terms"
											data-required="1"
											/>
										<span>
											<cms:text constant="label_agree_to_terms1" module="shop"/>
											<cms:raw text=" "/>
											<a
												href="$params['terms_link']"
												target="_blank"
												cms:eval="href"
												>
												<cms:text constant="label_agree_to_terms2" module="shop"/>
											</a>
											<cms:raw text="."/>
										</span>
									</label>
								</cms:if>
								<label class="checkbox">
									<input
										type="checkbox"
										name="want_promotions"
										/>
									<span><cms:text constant="label_want_promotions" module="shop"/></span>
								</label>
							</div>

							<hr/>

							<label class="radio">
								<input
									type="radio"
									name="existing_user"
									value="guest"
									/>
								<span><cms:text constant="label_guest" module="shop"/></span>
							</label>

							<div class="guest_checkout">
								<cms:if condition="!is_null($params['terms_link'])">
									<label class="checkbox">
										<input
											type="checkbox"
											name="agree_to_terms"
											data-required="1"
											/>
										<span>
											<cms:text constant="label_agree_to_terms1" module="shop"/>
											<cms:raw text=" "/>
											<a
												href="$params['terms_link']"
												target="_blank"
												cms:eval="href"
												>
												<cms:text constant="label_agree_to_terms2" module="shop"/>
											</a>
											<cms:raw text="."/>
										</span>
									</label>
								</cms:if>
								<label class="checkbox">
									<input
										type="checkbox"
										name="want_promotions"
										/>
									<span><cms:text constant="label_want_promotions" module="shop"/></span>
								</label>
							</div>

							<div class="checkout_controls">
								<button class="next"><cms:text constant="next"/></button>
							</div>
						</div>
					</cms:guest>

					<!-- Shipping Information -->
					<cms:if condition="$params['include_shipping']">
						<div class="page" id="shipping_information">
							<h1><cms:text constant="title_shipping_information" module="shop"/></h1>
							<label>
								<span><cms:text constant="label_presets" module="shop"/></span>
								<select
									name="presets"
									data-autoload="$_SESSION['logged'] ? 1 : 0"
									cms:eval="data-autoload"
									/>
							</label>
							<label>
								<span><cms:text constant="label_full_name" module="shop"/></span>
								<input
									class="in_array('name', $params['bad_fields']) ? 'bad' : ''"
									cms:eval="class,value"
									type="text"
									name="name"
									value="isset($_POST['name']) ? fix_chars($_POST['name']) : ''"
									maxlength="64"
									data-required="1"
									autocomplete="on"
									/>
							</label>
							<hr/>
							<label>
								<span><cms:text constant="label_email" module="shop"/></span>
								<input
									class="in_array('email', $params['bad_fields']) ? 'bad' : ''"
									cms:eval="class,value"
									type="email"
									name="email"
									value="isset($_POST['email']) ? fix_chars($_POST['email']) : ''"
									maxlength="127"
									data-required="1"
									autocomplete="on"
									/>
							</label>
							<label>
								<span><cms:text constant="label_phone_number" module="shop"/></span>
								<input
									class="in_array('phone', $params['bad_fields']) ? 'ltr bad' : 'ltr'"
									cms:eval="class,value"
									type="text"
									name="phone"
									value="isset($_POST['phone']) ? fix_chars($_POST['phone']) : ''"
									maxlength="127"
									autocomplete="on"
									/>
							</label>
							<hr/>
							<label>
								<span><cms:text constant="label_street" module="shop"/></span>
								<input
									class="in_array('street', $params['bad_fields']) ? 'bad' : ''"
									cms:eval="class,value"
									type="text"
									name="street"
									value="isset($_POST['street']) ? fix_chars($_POST['street']) : ''"
									maxlength="200"
									data-required="1"
									autocomplete="on"
									/>
								<small><cms:text constant="tooltip_street" module="shop"/></small>
							</label>
							<label>
								<span><cms:text constant="label_city" module="shop"/></span>
								<select
									name="city"
									data-required="1"
									autocomplete="on"
									>
									<option value=""></option>
									<optgroup label="label_price_group1" cms:constant="label">
										<option value="Ramat Gan"><cms:text constant="city_ramat_gan"/></option>
										<option value="Givataim"><cms:text constant="city_givataim_"/></option>
										<option value="Bney Brak"><cms:text constant="city_bney_brak"/></option>
										<option value="Tel Aviv"><cms:text constant="city_tel_aviv"/></option>
									</optgroup>
									<optgroup label="label_price_group2" cms:constant="label">
										<option value="Petah Tiqwa"><cms:text constant="city_petah_tiqwa"/></option>
										<option value="Rosh Aain"><cms:text constant="city_rosh_aain"/></option>
										<option value="Herzelia"><cms:text constant="city_herzelia"/></option>
										<option value="Ramat Hasharon"><cms:text constant="city_ramat_hasharon"/></option>
										<option value="Kfar Sava"><cms:text constant="city_kfar_sava"/></option>
										<option value="Ramat Efal"><cms:text constant="city_ramat_efal"/></option>
										<option value="Raanana"><cms:text constant="city_raanana"/></option>
										<option value="Netanya"><cms:text constant="city_netanya"/></option>
										<option value="Hod Hasharon"><cms:text constant="city_hod_hasharon"/></option>
										<option value="Azur"><cms:text constant="city_azur"/></option>
										<option value="Holon"><cms:text constant="city_holon"/></option>
										<option value="Bat Yam"><cms:text constant="city_bat_yam"/></option>
										<option value="Rishon Lezion"><cms:text constant="city_rishon_lezion"/></option>
										<option value="Yavne"><cms:text constant="city_yavne"/></option>
										<option value="Yahud"><cms:text constant="city_yahud"/></option>
										<option value="Neve Monoson"><cms:text constant="city_neve_monoson"/></option>
										<option value="Kiryat Ono"><cms:text constant="city_kiryat_ono"/></option>
										<option value="Savion"><cms:text constant="city_savion"/></option>
										<option value="Or Yehuda"><cms:text constant="city_or_yehuda"/></option>
										<option value="Givat Shmuel"><cms:text constant="city_givat_shmuel"/></option>
										<option value="Beit Dagan"><cms:text constant="city_beit_dagan"/></option>
										<option value="Gedera"><cms:text constant="city_gedera"/></option>
										<option value="Rehovot"><cms:text constant="city_rehovot"/></option>
										<option value="Mazkeret Batya"><cms:text constant="city_mazkeret_batya"/></option>
										<option value="Ramla"><cms:text constant="city_ramla"/></option>
										<option value="Lod"><cms:text constant="city_lod"/></option>
										<option value="Beer Sheva"><cms:text constant="city_beer_sheva"/></option>
										<option value="Haifa"><cms:text constant="city_haifa"/></option>
										<option value="Jerusalem"><cms:text constant="city_jerusalem"/></option>
									</optgroup>
								</select>
							</label>
							<label>
								<span><cms:text constant="label_country" module="shop"/></span>
								<select
									name="country"
									class="in_array('country', $params['bad_fields']) ? 'bad' : ''"
									cms:eval="class"
									data-required="1"
									autocomplete="on"
									>
									<cms:module
										name="country_list"
										action="show"
										filter="$params['fixed_country']"
										cms:eval="filter"
										/>
								</select>
							</label>
								<a
									href="url_Make('', 'contact-us')"
									cms:eval="href"
									>
									<cms:text constant="label_city_not_in_list"/>
								</a>
							<hr/>
							<label>
								<span><cms:text constant="label_access_code" module="shop"/></span>
								<input
									class="in_array('access_code', $params['bad_fields']) ? 'bad' : ''"
									cms:eval="class,value"
									type="text"
									name="access_code"
									value="isset($_POST['access_code']) ? fix_chars($_POST['access_code']) : ''"
									maxlength="40"
									autocomplete="on"
									/>
								<small><cms:text constant="tooltip_access_code" module="shop"/></small>
							</label>

							<div class="checkout_controls">
								<cms:guest>
									<button class="previous"><cms:text constant="back"/></button>
								</cms:guest>
								<button class="next"><cms:text constant="next"/></button>
							</div>

							<cms:if condition="!empty($params['message'])">
								<div class="message"><cms:var name="$params['message']"/></div>
							</cms:if>
						</div>
					</cms:if>

					<!-- Hidden Information -->
					<input type="hidden" name="billing_full_name" value="" />
					<input type="hidden" name="billing_credit_card" value="" />
					<input type="hidden" name="billing_expire_month" value="" />
					<input type="hidden" name="billing_expire_year" value="" />
					<input type="hidden" name="billing_cvv" value="" />
					<input type="hidden" name="zip" value="0" />

					<!-- Static payment method information -->
					<cms:payment_method
						name="$params['payment_method']"
						template="hidden_payment_method.xml"
						local="1"
						cms:eval="name"
						/>
					<input type="hidden" name="stage" value="set-info"/>

					<div class="page" id="card_selection">
						<h1><cms:text constant="title_card_selection"/></h1>

						<!-- Card design container -->
						<div class="container">
							<cms:module
								name="shop"
								action="show_item_list"
								category="cards"
								template="parts/card.xml"
								/>

							<!-- Text input for cards -->
							<textarea name="card_text" maxlength="255" rows="4" cols="60"/>
						</div>

						<a class="arrow next"/>
						<a class="arrow previous"/>

						<div class="checkout_controls">
							<button class="previous"><cms:text constant="back"/></button>
							<button class="next"><cms:text constant="next"/></button>
						</div>
					</div>

					<div class="page" id="checkout"/>
				</div>
			</form>
		</div>
	</div>
</document>
